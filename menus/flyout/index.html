<!doctype html>
<html class="no-js no-svg" lang="en">
<head>
  <meta charset="utf-8">
  <title>
  Fly-out Menus
  
    
       &bull; Menus
    
  
  &bull; WAI Web Accessibility Tutorials
  </title>
  <link rel="canonical" href="http://www.w3.org/WAI/tutorials/menus/flyout/" />
  <meta name="viewport" content="width=device-width">
  <link href="../../stylesheets/wai-act-e44f8932.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="../../javascripts/modernizr-a1c597b5.js" type="text/javascript"></script>
</head>
<body class="texts">
  <header role="banner">
    <div class="w3c-wai-header">
      <a href="http://w3.org/"><img alt="W3C" width="90" src="../../img/w3c-796023c4.png" /></a>
      <a href="http://w3.org/WAI/" class="wai"><img alt="Web Accessibility Initiative" src="../../img/wai-4c28be39.png" /></a>
    </div>
    <div class="page-title">
      <a class="" href="../../">Web Accessibility Tutorials <span class="subheading">Guidance on how to create websites that meet WCAG</span></a>
    </div>
  </header>
  <div class="with-side-menu">
    <a href="#nav" class="btn btn-jump" role="navigation">Jump to the navigation</a>
<main role="main" class="content approved-draft">
  <article role="article">
    <header class="tutorial-heading">
      <nav class="breadcrumb" aria-label="Breadcrumbs" role="navigation">
        <p>
          <span class="home"><a class="" href="../../"><span class="count"></span><span class="txt">Tutorials home</span></a></span> <span class="icon icon-chevron-right"></span><span class="visuallyhidden">»</span>
          <span class="other">
            
              <a class="" href="../"><span class="count"></span><span class="txt">Menus</span></a> <span class="icon icon-chevron-right"></span><span class="visuallyhidden">»</span>
            
            
            <span class="current-a"><span class="count"></span><span class="txt"><span class="visuallyhidden">Current: </span>Fly-out Menus</span></span>
          </span>
        </p>
      </nav>
      <h1>
        Fly-out Menus
      </h1>
    </header>

    
    


    <div class="inner">

      

      


      <p>If the user should be able to access pages deep in the website’s structure, fly-out menus are frequently used to archive the desired effect. Such fly-out menus are often called dropdown menus.</p>

<p>As interactive components, fly-out menus need to be developed with accessibility in mind to make sure that they are operable using the keyboard as well. Hiding menu items not displayed from keyboards and assistive technologies makes sure that the menu can be easily navigated. For people with reduced dexterity it is also important that submenus don’t snap back immediately when the mouse leaves the clickable area.</p>

<p>Usually the first-level menu items are links to individual pages whether they have a submenu or not. The submenu should then be duplicated as a secondary navigation on the linked web page to make sure that those pages are quickly reachable from there. Submenus are individual lists (<code>&lt;ul&gt;</code> or <code>&lt;ol&gt;</code>), nested in the parent’s list item (<code>&lt;li&gt;</code>).</p>

<p>Items containing a submenu should be marked in a way that is obvious. In the following example, the SpaceBears menu item has a submenu:</p>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">
<nav role="navigation" aria-label="Main Navigation" aria-presentation="true" id="flyoutnav">
		<ul>
				<li><a href="#flyoutnav">Home</a></li>
				<li><a href="#flyoutnav">Shop</a></li>
				<li class="has-submenu">
						<a href="#flyoutnav">SpaceBears</a>
						<ul>
								<li><a href="#flyoutnav">SpaceBear 6</a></li>
								<li><a href="#flyoutnav">SpaceBear 6 Plus</a></li>
						</ul>
				</li>
				<li><a href="#flyoutnav">MarsCars</a></li>
				<li><a href="#flyoutnav">Contact</a></li>
		</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnav {
			display:table;
			width:100%;
	}
	#flyoutnav > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutnav > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnav a,
	#flyoutnav .current {
			display: block;
			padding: .25em;
			border-bottom: .25em solid #E8E8E8;
	}
	#flyoutnav a {
			color: #fff;
			text-decoration: none;
	}
	#flyoutnav a:hover,
	#flyoutnav a:focus {
			background-color: #fff;
			color: #036;
			border-color: #036;
			text-decoration: underline;
	}
	#flyoutnav .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnav > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnav > ul > li:hover > ul {
		display:block;
	}

	#flyoutnav > ul > li > ul a{
		border-bottom-width: 1px;
	}

	.has-submenu > a:after {
		margin-left: 5px;
		line-height: 14px;
		content: url(../../img/ex-dropdown-inactive-63feea50.png);
	}
	.has-submenu:hover > a:hover:after,
	.has-submenu > a:focus:after {
		content: url(../../img/ex-dropdown-active-364145a2.png);
	}
</style>


  </div></figure>

<figure class="code ">
  <figcaption>Code snippet: HTML</figcaption>
<pre class="highlight html"><span class="nt">&lt;nav</span> <span class="na">role=</span><span class="s">"navigation"</span> <span class="na">aria-label=</span><span class="s">"Main Navigation"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;ul&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Shop<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"has-submenu"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>SpaceBears<span class="nt">&lt;/a&gt;</span>
						<span class="nt">&lt;ul&gt;</span>
								<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>SpaceBear 6<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
								<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>SpaceBear 6 Plus<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
						<span class="nt">&lt;/ul&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>MarsCars<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Contact<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
		<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre>

</figure>
<p>For mouse users, hiding the submenu until the mouse hovers over the first-level menu item is quite easy, but has the disadvantage that the menu immediately closes once the mouse leaves the list item (and the containing submenu).</p>

<figure class="code ">
  <figcaption>Code snippet: CSS</figcaption>
<pre class="highlight css"><span class="nt">nav</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">ul</span> <span class="p">{</span>
	<span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">nav</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="nt">li</span><span class="nd">:hover</span> <span class="nt">ul</span> <span class="p">{</span>
	<span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
<span class="p">}</span>
</pre>

</figure>
<h2 id="enhancing-the-menu-using-javascript">Enhancing the menu using JavaScript</h2>

<p>By using JavaScript, it is possible to react to keyboard usage and abrupt mouse movements. As soon as the mouse leaves the menu a timer is started which closes the menu after one second. If the mouse re-enters the submenu again, the timer is canceled.</p>

<h3 id="improve-mouse-support">Improve mouse support</h3>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">
<nav role="navigation" aria-label="Main Navigation" aria-presentation="true" id="flyoutnavmousefixed">
		<ul>
				<li><a href="#flyoutnavmousefixed">Home</a></li>
				<li><a href="#flyoutnavmousefixed">Shop</a></li>
				<li class="has-submenu">
						<a href="#flyoutnavmousefixed">SpaceBears</a>
						<ul>
								<li><a href="#flyoutnavmousefixed">SpaceBear 6</a></li>
								<li><a href="#flyoutnavmousefixed">SpaceBear 6 Plus</a></li>
						</ul>
				</li>
				<li><a href="#flyoutnavmousefixed">MarsCars</a></li>
				<li><a href="#flyoutnavmousefixed">Contact</a></li>
		</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnavmousefixed {
			display:table;
			width:100%;
	}
	#flyoutnavmousefixed > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutnavmousefixed > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnavmousefixed a,
	#flyoutnavmousefixed .current {
			display: block;
			padding: .25em;
			border-color: #E8E8E8;
	}
	#flyoutnavmousefixed a {
			color: #fff;
			text-decoration: none;
	}
	#flyoutnavmousefixed a:hover,
		#flyoutnavmousefixed a:focus {
			background-color: #fff;
			color: #036;
			border: 1px solid #036;
			text-decoration: underline;
	}
	#flyoutnavmousefixed .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnavmousefixed > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnavmousefixed > ul > li.open > ul {
		display:block;
	}

	#flyoutnavmousefixed > ul > li > ul a{
		border-bottom-width: 1px;
	}
</style>

<script>
var menuItems1 = document.querySelectorAll('#flyoutnavmousefixed li.has-submenu');
var timer1;

Array.prototype.forEach.call(menuItems1, function(el, i){
		el.addEventListener("mouseover", function(event){
				this.className = "has-submenu open";
				clearTimeout(timer1);
		});
		el.addEventListener("mouseout", function(event){
				timer1 = setTimeout(function(event){
						document.querySelector("#flyoutnavmousefixed .has-submenu.open").className = "has-submenu";
				}, 1000);
		});
});
</script>


  </div></figure>

<figure class="code ">
  <figcaption>Code snippet: JavaScript</figcaption>
<pre class="highlight javascript"><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">menuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
	<span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"mouseover"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu open"</span><span class="p">;</span>
		<span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
	<span class="p">});</span>
	<span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"mouseout"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
			<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">".has-submenu.open"</span><span class="p">).</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu"</span><span class="p">;</span>
		<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
	<span class="p">});</span>
<span class="p">});</span>
</pre>

</figure>
<h3 id="improve-keyboard-support">Improve keyboard support</h3>

<p>To improve Keyboard support, the decision has to be made if the top-level menu item should serve as a toggle for the menu for all users or be a link itself. Don’t open the submenu as soon as the focus enters the top-level menu item, as that would mean a keyboard user needs to step through all the submenu links to get to the next top-level item.</p>

<h4 id="toggle-submenu-using-the-top-level-menu-item">Toggle submenu using the top-level menu item</h4>

<p>The activation of the top-level menu item won’t link to the page in its <code>href</code> attribute but instead show the sub menu. A script stops the browser from following the link to the page. If the focus leaves the submenu (for example by using the tab key on the last submenu item), the submenu needs to close.</p>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">
<nav role="navigation" aria-label="Main Navigation" aria-presentation="true" id="flyoutnavkbfixed">
		<ul>
				<li><a href="#flyoutnavkbfixed">Home</a></li>
				<li><a href="#flyoutnavkbfixed">Shop</a></li>
				<li class="has-submenu">
						<a href="#flyoutnavkbfixed">SpaceBears</a>
						<ul>
								<li><a href="#flyoutnavkbfixed">SpaceBear 6</a></li>
								<li><a href="#flyoutnavkbfixed">SpaceBear 6 Plus</a></li>
						</ul>
				</li>
				<li><a href="#flyoutnavkbfixed">MarsCars</a></li>
				<li><a href="#flyoutnavkbfixed">Contact</a></li>
		</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnavkbfixed {
			display:table;
			width:100%;
	}
	#flyoutnavkbfixed > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutnavkbfixed > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnavkbfixed a,
	#flyoutnavkbfixed .current {
			display: block;
			padding: .25em;
			border-color: #E8E8E8;
	}
	#flyoutnavkbfixed a {
			color: #fff;
			text-decoration: none;
	}
	#flyoutnavkbfixed a:hover,
		#flyoutnavkbfixed a:focus {
			background-color: #fff;
			color: #036;
			border: 1px solid #036;
			text-decoration: underline;
	}
	#flyoutnavkbfixed .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnavkbfixed > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnavkbfixed > ul > li.open > ul {
		display:block;
	}

	#flyoutnavkbfixed > ul > li > ul a{
		border-bottom-width: 1px;
	}
</style>

<script>
/* focusin/out event polyfill (firefox) */
!function(){
	var w = window,
	d = w.document;

	if( w.onfocusin === undefined ){
		d.addEventListener('focus' ,addPolyfill ,true);
		d.addEventListener('blur' ,addPolyfill ,true);
		d.addEventListener('focusin' ,removePolyfill ,true);
		d.addEventListener('focusout' ,removePolyfill ,true);
	}
	function addPolyfill(e){
		var type = e.type === 'focus' ? 'focusin' : 'focusout';
		var event = new CustomEvent(type, { bubbles:true, cancelable:false });
		event.c1Generated = true;
		e.target.dispatchEvent( event );
	}
	function removePolyfill(e){
if(!e.c1Generated){ // focus after focusin, so chrome will the first time trigger tow times focusin
	d.removeEventListener('focus' ,addPolyfill ,true);
	d.removeEventListener('blur' ,addPolyfill ,true);
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
}
setTimeout(function(){
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
});
}
}();

function hasClass(el, className) {
	if (el.classList) {
		return el.classList.contains(className);
	} else {
		return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);
	}
}

var menuItems1 = document.querySelectorAll('#flyoutnavkbfixed li.has-submenu');
var timer1, timer2;

Array.prototype.forEach.call(menuItems1, function(el, i){
		el.addEventListener("mouseover", function(event){
				this.className = "has-submenu open";
				clearTimeout(timer1);
		});
		el.addEventListener("mouseout", function(event){
				timer1 = setTimeout(function(event){
						document.querySelector("#flyoutnavkbfixed .has-submenu.open").className = "has-submenu";
				}, 1000);
		});
		el.querySelector('a').addEventListener("click",  function(event){
			if (this.parentNode.className == "has-submenu") {
				this.parentNode.className = "has-submenu open";
			} else {
				this.parentNode.className = "has-submenu";
			}
			event.preventDefault();
		});
		var links = el.querySelectorAll('a');
		Array.prototype.forEach.call(links, function(el, i){
			el.addEventListener("focus", function() {
				if (timer2) {
					clearTimeout(timer2);
					timer2 = null;
				}
			});
			el.addEventListener("blur", function(event) {
				timer2 = setTimeout(function () {
					var opennav = document.querySelector("#flyoutnavkbfixed .has-submenu.open")
					if (opennav) {
						opennav.className = "has-submenu";
					}
				}, 10);
			});
		});
});
</script>


  </div></figure>

<p>The following code iterates through all menu items and adds click event to the first (top-level) link in each menu item. The click event fires regardless of input method as soon as the link gets activated. If the submenu is closed when the link is activated, the script opens the submenu, and vice versa.</p>

<figure class="code ">
  <figcaption>Code snippet: JavaScript</figcaption>
<pre class="highlight javascript"><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">menuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
	<span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'a'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">==</span> <span class="s2">"has-submenu"</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu open"</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu"</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">});</span>
<span class="p">});</span>
</pre>

</figure>
<h4 id="toggle-submenu-using-a-special-show-submenu-button">Toggle submenu using a special “show submenu” button</h4>

<p>If the top-level menu item should stay a link to a page, adding a separate button that toggles the submenu is the most reliable way to address the issue.</p>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">
<nav role="navigation" aria-label="Main Navigation" aria-presentation="true" id="flyoutnavkbbtn">
		<ul>
				<li><a href="#flyoutnavkbbtn">Home</a></li>
				<li><a href="#flyoutnavkbbtn">Shop</a></li>
				<li class="has-submenu">
						<a href="#flyoutnavkbbtn">SpaceBears</a>
						<ul>
								<li><a href="#flyoutnavkbbtn">SpaceBear 6</a></li>
								<li><a href="#flyoutnavkbbtn">SpaceBear 6 Plus</a></li>
						</ul>
				</li>
				<li><a href="#flyoutnavkbbtn">MarsCars</a></li>
				<li><a href="#flyoutnavkbbtn">Contact</a></li>
		</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnavkbbtn {
			display:table;
			width:100%;
	}
	#flyoutnavkbbtn > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutnavkbbtn > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnavkbbtn a,
	#flyoutnavkbbtn .current {
			display: block;
			padding: .25em;
			border-color: #E8E8E8;
	}
	#flyoutnavkbbtn a {
			color: #fff;
			text-decoration: none;
	}
	#flyoutnavkbbtn a:hover,
		#flyoutnavkbbtn a:focus {
			background-color: #fff;
			color: #036;
			border: 1px solid #036;
			text-decoration: underline;
	}
	#flyoutnavkbbtn .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnavkbbtn > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnavkbbtn > ul > li.open > ul {
		display:block;
	}

	#flyoutnavkbbtn > ul > li > ul a{
		border-bottom-width: 1px;
	}


	#flyoutnavkbbtn .has-submenu > a:after {
		margin-left: 5px;
		line-height: 14px;
		content: '';
	}
	#flyoutnavkbbtn .has-submenu:hover > a:hover:after,
	#flyoutnavkbbtn .has-submenu > a:focus:after {
		content: '';
	}

	#flyoutnavkbbtn .has-submenu button {
		background-color: transparent;
		border: none;
		padding:0;
		line-height: 1;
		padding: 3px;
	}

	 #flyoutnavkbbtn .has-submenu button > span {
		display:inline-block;
		width: .8em;
		height: .8em;
		background: url(../../img/ex-dropdown-inactive-63feea50.png) center no-repeat;
	}

	#flyoutnavkbbtn .has-submenu button:hover > span,
	#flyoutnavkbbtn .has-submenu button:focus > span {
		background: url(../../img/ex-dropdown-active-364145a2.png) #fff;
	}

	#flyoutnavkbbtn .has-submenu:hover  button,
	#flyoutnavkbbtn .has-submenu a:focus button {
		background-color: #036;
	}
	#flyoutnavkbbtn .has-submenu button:focus {
		background: #FFF;
	}
</style>

<script>
/* focusin/out event polyfill (firefox) */
!function(){
	var w = window,
	d = w.document;

	if( w.onfocusin === undefined ){
		d.addEventListener('focus' ,addPolyfill ,true);
		d.addEventListener('blur' ,addPolyfill ,true);
		d.addEventListener('focusin' ,removePolyfill ,true);
		d.addEventListener('focusout' ,removePolyfill ,true);
	}
	function addPolyfill(e){
		var type = e.type === 'focus' ? 'focusin' : 'focusout';
		var event = new CustomEvent(type, { bubbles:true, cancelable:false });
		event.c1Generated = true;
		e.target.dispatchEvent( event );
	}
	function removePolyfill(e){
if(!e.c1Generated){ // focus after focusin, so chrome will the first time trigger tow times focusin
	d.removeEventListener('focus' ,addPolyfill ,true);
	d.removeEventListener('blur' ,addPolyfill ,true);
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
}
setTimeout(function(){
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
});
}
}();

function hasClass(el, className) {
	if (el.classList) {
		return el.classList.contains(className);
	} else {
		return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);
	}
}

var menuItems1 = document.querySelectorAll('#flyoutnavkbbtn li.has-submenu');
var timer1, timer2;



var parseHTML = function(str) {
	var tmp = document.implementation.createHTMLDocument();
	tmp.body.innerHTML = str;
	return tmp.body.children;
};



Array.prototype.forEach.call(menuItems1, function(el, i){
		var btn = '<button><span><span class="visuallyhidden">show submenu</span></span></button>';
		var activatingA = el.querySelector('a')
		activatingA.innerHTML = activatingA.innerHTML + ' ' + btn;
		el.addEventListener("mouseover", function(event){
				this.className = "has-submenu open";
				clearTimeout(timer1);
		});
		el.addEventListener("mouseout", function(event){
				timer1 = setTimeout(function(event){
						document.querySelector("#flyoutnavkbbtn .has-submenu.open").className = "has-submenu";
				}, 1000);
		});
		el.querySelector('a button').addEventListener("click",  function(event){
			if (this.parentNode.parentNode.className == "has-submenu") {
				this.parentNode.parentNode.className = "has-submenu open";
			} else {
				this.parentNode.parentNode.className = "has-submenu";
			}
			event.preventDefault();
		});
		var links = el.querySelectorAll('a');
		Array.prototype.forEach.call(links, function(el, i){
			el.addEventListener("focus", function() {
				if (timer2) {
					clearTimeout(timer2);
					timer2 = null;
				}
			});
			el.addEventListener("blur", function(event) {
				timer2 = setTimeout(function () {
					var opennav = document.querySelector("#flyoutnavkbbtn .has-submenu.open")
					if (opennav) {
						opennav.className = "has-submenu";
					}
				}, 10);
			});
		});
});
</script>


  </div></figure>

<p>In the following code, a button is attached to every menu item link with a submenu. The click event listener is applied to this button and toggles the menu. The invisible button text is changed from show to hide submenu according to the state of the submenu.</p>

<figure class="code ">
  <figcaption>Code snippet: JavaScript</figcaption>
<pre class="highlight javascript"><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">menuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
	<span class="kd">var</span> <span class="nx">btn</span> <span class="o">=</span> <span class="s1">'&lt;button&gt;&lt;span&gt;&lt;span class="visuallyhidden"&gt;show submenu&lt;/span&gt;&lt;/span&gt;&lt;/button&gt;'</span><span class="p">;</span>
	<span class="kd">var</span> <span class="nx">topLevelLink</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'a'</span><span class="p">);</span>
	<span class="nx">topLevelLink</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">topLevelLink</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="nx">btn</span><span class="p">;</span>

	<span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'a button'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">==</span> <span class="s2">"has-submenu"</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu open"</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.visuallyhidden'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="s1">'hide submenu'</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">"has-submenu"</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.visuallyhidden'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="s1">'show submenu'</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
	<span class="p">});</span>
<span class="p">});</span>
</pre>

</figure>
<h2 id="improve-screen-reader-support-using-wai-aria">Improve screen reader support using WAI-ARIA</h2>

<p>Currently, screen reader users are unable to tell if an item has a submenu or not and if it is opened. WAI-ARIA helps to convey this information by adding the following two attributes to the menu’s HTML:</p>

<ul>
  <li><strong><code>aria-haspopup="true"</code></strong> is used so screen readers are able to announce that the link has a submenu.</li>
  <li><strong><code>aria-expanded</code></strong> is initially set to <code>false</code> but changed to <code>true</code> when the submenu opens which forces screen readers to announce that this menu item is now expanded.</li>
</ul>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">
<nav role="navigation" aria-label="Main Navigation" aria-presentation="true" id="flyoutaria">
		<ul>
				<li><a href="#flyoutaria">Home</a></li>
				<li><a href="#flyoutaria">Shop</a></li>
				<li class="has-submenu">
						<a href="#" aria-haspopup="true" aria-expanded="false">SpaceBears</a>
						<ul>
								<li><a href="#flyoutaria">SpaceBear 6</a></li>
								<li><a href="#flyoutaria">SpaceBear 6 Plus</a></li>
						</ul>
				</li>
				<li><a href="#flyoutaria">MarsCars</a></li>
				<li><a href="#flyoutaria">Contact</a></li>
		</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutaria {
			display:table;
			width:100%;
	}
	#flyoutaria > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutaria > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutaria a,
	#flyoutaria .current {
			display: block;
			padding: .25em;
			border-color: #E8E8E8;
	}
	#flyoutaria a {
			color: #fff;
			text-decoration: none;
	}
	#flyoutaria a:hover,
		#flyoutaria a:focus {
			background-color: #fff;
			color: #036;
			border: 1px solid #036;
			text-decoration: underline;
	}
	#flyoutaria .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutaria > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutaria > ul > li.open > ul {
		display:block;
	}

	#flyoutaria > ul > li > ul a{
		border-bottom-width: 1px;
	}
</style>

<script>
/* focusin/out event polyfill (firefox) */
!function(){
	var w = window,
	d = w.document;

	if( w.onfocusin === undefined ){
		d.addEventListener('focus' ,addPolyfill ,true);
		d.addEventListener('blur' ,addPolyfill ,true);
		d.addEventListener('focusin' ,removePolyfill ,true);
		d.addEventListener('focusout' ,removePolyfill ,true);
	}
	function addPolyfill(e){
		var type = e.type === 'focus' ? 'focusin' : 'focusout';
		var event = new CustomEvent(type, { bubbles:true, cancelable:false });
		event.c1Generated = true;
		e.target.dispatchEvent( event );
	}
	function removePolyfill(e){
if(!e.c1Generated){ // focus after focusin, so chrome will the first time trigger tow times focusin
	d.removeEventListener('focus' ,addPolyfill ,true);
	d.removeEventListener('blur' ,addPolyfill ,true);
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
}
setTimeout(function(){
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
});
}
}();

function hasClass(el, className) {
	if (el.classList) {
		return el.classList.contains(className);
	} else {
		return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);
	}
}

var menuItems1 = document.querySelectorAll('#flyoutaria li.has-submenu');
var timer1, timer2;

Array.prototype.forEach.call(menuItems1, function(el, i){
		el.addEventListener("mouseover", function(event){
				this.className = "has-submenu open";
				clearTimeout(timer1);
		});
		el.addEventListener("mouseout", function(event){
				timer1 = setTimeout(function(event){
						document.querySelector("#flyoutaria .has-submenu.open").className = "has-submenu";
				}, 1000);
		});
		el.querySelector('a').addEventListener("click",  function(event){
			if (this.parentNode.className == "has-submenu") {
				this.parentNode.className = "has-submenu open";
				this.setAttribute('aria-expanded', "true");
			} else {
				this.parentNode.className = "has-submenu";
				this.setAttribute('aria-expanded', "false");
			}
			event.preventDefault();
			return false;
		});
		var links = el.querySelectorAll('a');
		Array.prototype.forEach.call(links, function(el, i){
			el.addEventListener("focus", function() {
				if (timer2) {
					clearTimeout(timer2);
					timer2 = null;
				}
			});
			el.addEventListener("blur", function(event) {
				timer2 = setTimeout(function () {
					var opennav = document.querySelector("#flyoutaria .has-submenu.open")
					if (opennav) {
						opennav.className = "has-submenu";
						document.querySelector("#flyoutaria .has-submenu.open [aria-expanded]").setAttribute('aria-expanded', "false");
					}
				}, 10);
			});
		});
});
</script>


  </div></figure>



      <div class="resources">
  <h2 id="related">Related WCAG2.0 resources</h2>
  <div class="resources-inner">
	  <p>These tutorials show examples of best practice implementations that meet WCAG 2.0 in certain situations. For <em>normative</em> information, see the <a href="http://www.w3.org/TR/WCAG20/">WCAG 2.0 standard</a>. Further guidance can also be found in the (non-normative) techniques below.</p>
	  
	  
	    <p><strong>Techniques:</strong></p>
	    <ul>
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	            <li><a href="http://www.w3.org/TR/WCAG20-TECHS/H4">H4: Creating a logical tab order through links, form controls, and objects</a></li>
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	        
	          
	            <li><a href="http://www.w3.org/TR/WCAG20-TECHS/SCR26">SCR26: Inserting dynamic content into the Document Object Model immediately following its trigger element</a></li>
	          
	        
	      
	        
	          
	        
	      
	        
	          
	        
	      
	    </ul>
	  
  </div>
</div>


      <div role="navigation" id="tools">
  <ul>
    
      
      
        
        
        
      
        
        
          <li class="prev">
            <span><a rel="prev" class="" href="../styling/"><span class="count"></span><span class="txt"><span class="dir">Previous:</span><span class="title">Styling</span></span></a></span>
          </li>
        
        
      
        
        
        
      
        
        
        
          <li class="next">
            <span><a rel="next" class="" href="../application/"><span class="count"></span><span class="txt"><span class="dir">Next:</span><span class="title">Applications Menus</span></span></a></span>
          </li>
        
      
        
        
        
      
    
  </ul>
</div>


      <aside class="side-box github" role="complementary">
  <h2 class="heading">We welcome your ideas</h2>
  <p>Please send any ideas, suggestions, or comments to the <a href="mailto:wai-eo-editors@w3.org?subject=[Tutorial%20Feedback]">(publicly-archived) mailing list wai-eo-editors@w3.org</a>. You can also contribute to the <a href="https://github.com/w3c/wai-tutorials" rel="nofollow">code directly on Github</a>.</p>

	<div class="editpage">
  	<a class="btn" href="https://github.com/w3c/wai-tutorials/blob/master/source/menus/flyout.html.erb.md">Fork &amp; edit this page on Github</a>
	</div>

</aside>


    </div>
  </article>
</main>
<div class="navigation">
  <nav role="navigation" aria-label="Navigation" id="nav">
    <h2 class="list-heading" id="list-heading-tutorials">
      
        Menus Tutorial
      
    </h2>
    <ul aria-labelledby="list-heading-tutorials">
      
        
          <li class="intro"><a class="" href="../"><span class="count"></span><span class="txt">Menu Concepts</span></a></li>
        
        
          
            <li><a class="" href="../structure/"><span class="count"></span><span class="txt">Structure</span></a></li>
          
        
          
            <li><a class="" href="../styling/"><span class="count"></span><span class="txt">Styling</span></a></li>
          
        
          
            <li><span class="current-a"><span class="count"></span><span class="txt"><span class="visuallyhidden">Current: </span>Fly-out Menus</span></span></li>
          
        
          
            <li><a class="" href="../application/"><span class="count"></span><span class="txt">Applications Menus</span></a></li>
          
        
          
            <li><a class="" href="../multiple-ways/"><span class="count"></span><span class="txt">Multiple Ways</span></a></li>
          
        
      
    </ul>
    <h2 class="list-heading" id="list-heading-topics">
  All Tutorials
</h2>
<ul class="topics" aria-labelledby="list-heading-topics">
	<li><a href="../../page-structure/"><span class="count"></span><span class="txt">Page Structure <span class="status">draft</span></span></a></li>
	<li><span class="current-a"><span class="count"></span><span class="txt"><span class="visuallyhidden">Current: </span>Menus <span class="status">draft</span></span></span></li>
	<li><a href="../../images/"><span class="count"></span><span class="txt">Images</span></a></li>
	<li><a href="../../tables/"><span class="count"></span><span class="txt">Tables</span></a></li>
	<li><a href="../../forms/"><span class="count"></span><span class="txt">Forms</span></a></li>
	<li><a href="../../carousels/"><span class="count"></span><span class="txt">Carousels <span class="status">draft</span></span></a></li>
</ul>

  </nav>
</div>
  </div>
	<footer role="contentinfo">
    <div>
		<h2>Document info</h2>
		<ul>
			<li><strong>Status:</strong>
				
	        Draft, approved by <a href="http://www.w3.org/WAI/EO/">EOWG</a>, updated
	      
	      15 December 2014
	      
			</li>
      <li>
<strong>Editors: </strong>
<ul class="inline">
    <li><a href="http://w3.org/People/yatil/">Eric Eggert</a></li><li><a href="http://w3.org/People/shadi/">Shadi Abou-Zahra</a></li>
  </ul>

<strong>Contributors:</strong>
The Education and Outreach Working Group (<a href="http://www.w3.org/WAI/EO/">EOWG</a>).
</li>

<li>
</li>

      <li>[<a class="" href="../../attributions/"><span class="count"></span><span class="txt">Attributions</span></a>]  [<a class="" href="../../changelog/"><span class="count"></span><span class="txt">Changelog</span></a>]</li>
    </ul>
    <p>
    	[<a href="http://www.w3.org/WAI/sitemap.html">WAI Site Map</a>]
    	[<a href="http://www.w3.org/WAI/sitehelp.html">Help with WAI Website</a>]
    	[<a href="http://www.w3.org/WAI/search.php">Search</a>]
    	[<a href="http://www.w3.org/WAI/contacts">Contacting WAI</a>]
		</p>
    <p><strong>Feedback welcome to <a href="mailto:wai-eo-editors@w3.org">wai-eo-editors@w3.org</a></strong> (a publicly archived list) or <a href="mailto:wai@w3.org">wai@w3.org</a> (a WAI staff-only list).</p>
    <div class="copyright">
      <p>
	<a rel="Copyright" href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©2015
      	<a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
				(<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
					<a href="http://www.ercim.org/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
					<a href="http://www.keio.ac.jp/">Keio</a>,
         	<a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
         <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>,               <a rel="Copyright" href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>               and <a rel="Copyright" href="http://www.w3.org/Consortium/Legal/copyright-software">software licensing</a> rules apply. Your interactions with this site are in accordance with our <a href="http://www.w3.org/Consortium/Legal/privacy-statement#Public">public</a>
               and <a href="http://www.w3.org/Consortium/Legal/privacy-statement#Members">Member</a>privacy statements.</p>
               </div><!-- ends copyright -->
    </div>
	</footer>
	<script src="../../javascripts/main-d3407273.js" type="text/javascript"></script>
	</body>
</html>
