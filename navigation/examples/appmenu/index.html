<!doctype html>
<html class="no-js no-svg" lang="en">
<head>
  <meta charset="utf-8">
  <title>
  Example for an Application Menu
  
    
  
  &bull; WAI Web Accessibility Tutorials
  </title>
  <meta name="viewport" content="width=device-width">
  <link href="../../../stylesheets/wai-act-19f1284e.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="../../../javascripts/modernizr-a1c597b5.js" type="text/javascript"></script>
</head>
<body class="texts">
  <header role="banner">
    <div class="w3c-wai-header">
      <a href="http://w3.org/"><img alt="W3C" width="90" src="../../../img/w3c-796023c4.png" /></a>
      <a href="http://w3.org/WAI/" class="wai"><img alt="Web Accessibility Initiative" src="../../../img/wai-4c28be39.png" /></a>
    </div>
     <div class="page-title">
      <a class="" href="../../../">Web Accessibility Tutorials <span class="subheading">Guidance on how to create websites that meet WCAG</span></a>
    </div>
  </header>
  <main role="main" class="with-side-menu">
    <a href="#nav" class="btn btn-jump">Jump to the navigation</a>
<div class="content editors-draft">
  <header class="tutorial-heading">
    <div class="breadcrumb">&nbsp;</div>
    <h1>
      Example for an Application Menu
    </h1>
  </header>

  

  <div class="inner">

    <figure class="sample ">
  <figcaption>Example: </figcaption>
  <div class="box-content"><div role="menubar">
  <ul role="menu" aria-label="functions" id="appmenu">
      <li role="menuitem" aria-haspopup="true">
        File
        <ul role="menu">
              <li role="menuitem">New</li>
              <li role="menuitem">Open</li>
              <li role="menuitem">Print</li>
          </ul>
      </li>
      <li role="menuitem" aria-haspopup="true">
        Edit
        <ul role="menu">
              <li role="menuitem">Undo</li>
              <li role="menuitem">Redo</li>
              <li role="menuitem">Cut</li>
              <li role="menuitem">Copy</li>
              <li role="menuitem">Paste</li>
          </ul>
      </li>
      <li role="menuitem" aria-haspopup="true">
          Format
          <ul role="menu">
              <li role="menuitem">Font</li>
              <li role="menuitem">Text</li>
          </ul>
      </li>
      <li role="menuitem" aria-haspopup="true">
        View
        <ul role="menu">
          <li role="menuitem">100%</li>
          <li role="menuitem">Zoom In</li>
          <li role="menuitem">Zoom Out</li>
        </ul>
      </li>
      <li role="menuitem">Help</li>
  </ul>
</div>

<style>
.show-overflow2 {
    overflow: visible !important;
    float: left;
    width: 100%;
}

.show-overflow2 .box-content {
    overflow: visible !important;
    float: left;
    width: 100%;
}
  #appmenu {
      width:80%;
      float: left;
      margin: 0;
      padding: 0;
      color: #fff;
      background-color: #369;
      padding: .25em;
  }
  #appmenu li {
    white-space: nowrap;
    display:block;
    padding: .25em .75em;
    border: 1px solid #fff;
  }
  #appmenu > li {
      float: left;
      background-color: #036;
      text-align: center;
      position:relative;
      cursor: pointer;
  }
  #appmenu :hover,
    #appmenu :focus {
      background-color: #fff;
      color: #036;
      border: 1px solid #036;
      text-decoration: underline;
  }

  #appmenu :hover li,
    #appmenu :focus li {
      color: #fff;
      background-color: #036;
    }

  #appmenu > li > ul {
    display: none;
    position:absolute;
    left:0;
    right:0;
    top:100%;
    padding:0;
    margin:0;
    background-color: #036;
    width: 200%;
    text-align: left;
  }

#appmenu > li[aria-expanded="true"] > ul {
    display:block;
  }
</style>

<script>
var appsMenuItems = document.querySelectorAll('#appmenu > li');
var subMenuItems = document.querySelectorAll('#appmenu > li li');
var keys = {
  tab:    9,
  enter:  13,
  esc:    27,
  space:  32,
  left:   37,
  up:     38,
  right:  39,
  down:   40
};
var currentIndex, subIndex;

var gotoIndex = function(idx) {
  if (idx == appsMenuItems.length) {
    idx = 0;
  } else if (idx < 0) {
    idx = appsMenuItems.length - 1;
  }
  appsMenuItems[idx].focus();
  currentIndex = idx;
};

var gotoSubIndex = function (menu, idx) {
  var items = menu.querySelectorAll('li');
  if (idx == items.length) {
    idx = 0;
  } else if (idx < 0) {
    idx = items.length - 1;
  }
  items[idx].focus();
  subIndex = idx;
}

Array.prototype.forEach.call(appsMenuItems, function(el, i){
    if (0 == i) {
      el.setAttribute('tabindex', '0');
      el.addEventListener("focus", function() {
        currentIndex = 0;
      });
    } else {
      el.setAttribute('tabindex', '-1');
    }
    el.addEventListener("focus", function() {
      subIndex = 0;
      Array.prototype.forEach.call(appsMenuItems, function(el, i){
        el.setAttribute('aria-expanded', "false");
      });
    });
    el.addEventListener("click",  function(event){
      if (this.getAttribute('aria-expanded') == 'false' || this.getAttribute('aria-expanded') ==  null) {
        this.setAttribute('aria-expanded', "true");
      } else {
        this.setAttribute('aria-expanded', "false");
      }
      event.preventDefault();
      return false;
    });
    el.addEventListener("keydown", function(event) {
      switch (event.keyCode) {
        case keys.right:
          gotoIndex(currentIndex + 1);
          break;
        case keys.left:
          gotoIndex(currentIndex - 1);
          break;
        case keys.tab:
          if (event.shiftKey) {
            gotoIndex(currentIndex - 1);
          } else {
            gotoIndex(currentIndex + 1);
          }
          break;
        case keys.enter:
        case keys.down:
          this.click();
          subindex = 0;
          gotoSubIndex(this.querySelector('ul'), 0);
          break;
        case keys.up:
          this.click();
          var submenu = this.querySelector('ul');
          subindex = submenu.querySelectorAll('li').length - 1;
          gotoSubIndex(submenu, subindex);
          break;
        case keys.esc:
          document.querySelector('a[href="#related"]').focus();
      }
      event.preventDefault();
    });
});

Array.prototype.forEach.call(subMenuItems, function(el, i){
  el.setAttribute('tabindex', '-1');
  el.addEventListener("keydown", function(event) {
      switch (event.keyCode) {
        case keys.tab:
          if (event.shiftKey) {
            gotoIndex(currentIndex - 1);
          } else {
            gotoIndex(currentIndex + 1);
          }
          break;
        case keys.right:
          gotoIndex(currentIndex + 1);
          break;
        case keys.left:
          gotoIndex(currentIndex - 1);
          break;
        case keys.esc:
          gotoIndex(currentIndex);
          break;
        case keys.down:
          gotoSubIndex(this.parentNode, subIndex + 1);
          break;
        case keys.up:
          gotoSubIndex(this.parentNode, subIndex - 1);
          break;
        case keys.enter:
        case keys.space:
          alert(this.innerText);
          break;
      }
      event.preventDefault();
      event.stopPropagation();
      return false;
    });
  el.addEventListener("click", function(event) {
      alert(this.innerHTML);
      event.preventDefault();
      event.stopPropagation();
      return false;
    });
});
</script>



  </div></figure>

<figure class="code ">
  <figcaption>Code snippet: HTML</figcaption>
<pre class="highlight html"><span class="nt">&lt;div</span> <span class="na">role=</span><span class="s">"menubar"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">role=</span><span class="s">"menu"</span> <span class="na">aria-label=</span><span class="s">"functions"</span> <span class="na">id=</span><span class="s">"appmenu"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">aria-haspopup=</span><span class="s">"true"</span><span class="nt">&gt;</span>
        File
        <span class="nt">&lt;ul</span> <span class="na">role=</span><span class="s">"menu"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>New<span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Open<span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Print<span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">aria-haspopup=</span><span class="s">"true"</span><span class="nt">&gt;</span>
        Edit
        <span class="nt">&lt;ul</span> <span class="na">role=</span><span class="s">"menu"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Undo<span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Redo<span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Cut<span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Copy<span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Paste<span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">aria-haspopup=</span><span class="s">"true"</span><span class="nt">&gt;</span>
          Format
          <span class="nt">&lt;ul</span> <span class="na">role=</span><span class="s">"menu"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Font<span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Text<span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span> <span class="na">aria-haspopup=</span><span class="s">"true"</span><span class="nt">&gt;</span>
        View
        <span class="nt">&lt;ul</span> <span class="na">role=</span><span class="s">"menu"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>100%<span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Zoom In<span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Zoom Out<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li</span> <span class="na">role=</span><span class="s">"menuitem"</span><span class="nt">&gt;</span>Help<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre>

</figure>
<figure class="code ">
  <figcaption>Code snippet: CSS</figcaption>
<pre class="highlight css"><span class="nf">#appmenu</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">80</span><span class="err">%</span><span class="p">;</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#369</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">.25em</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#appmenu</span> <span class="nt">li</span> <span class="p">{</span>
  <span class="nl">white-space</span><span class="p">:</span> <span class="nb">nowrap</span><span class="p">;</span>
  <span class="nl">display</span><span class="p">:</span><span class="nb">block</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">.25em</span> <span class="m">.75em</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#appmenu</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="p">{</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#036</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">position</span><span class="p">:</span><span class="nb">relative</span><span class="p">;</span>
  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#appmenu</span> <span class="nd">:hover</span><span class="o">,</span>
<span class="nf">#appmenu</span> <span class="nd">:focus</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#036</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#036</span><span class="p">;</span>
  <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">underline</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#appmenu</span> <span class="nd">:hover</span> <span class="nt">li</span><span class="o">,</span>
<span class="nf">#appmenu</span> <span class="nd">:focus</span> <span class="nt">li</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#036</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#appmenu</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">position</span><span class="p">:</span><span class="nb">absolute</span><span class="p">;</span>
  <span class="nl">left</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
  <span class="nl">right</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
  <span class="nl">top</span><span class="p">:</span><span class="m">100</span><span class="err">%</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#036</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">200</span><span class="err">%</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#appmenu</span> <span class="o">&gt;</span> <span class="nt">li</span><span class="o">[</span><span class="nt">aria-expanded</span><span class="o">=</span><span class="err">"</span><span class="nt">true</span><span class="err">"</span><span class="o">]</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span><span class="nb">block</span><span class="p">;</span>
<span class="p">}</span>
</pre>

</figure>
<figure class="code ">
  <figcaption>Code snippet: JavaScript</figcaption>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">appsMenuItems</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'#appmenu &gt; li'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">subMenuItems</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'#appmenu &gt; li li'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">tab</span><span class="p">:</span>    <span class="mi">9</span><span class="p">,</span>
  <span class="na">enter</span><span class="p">:</span>  <span class="mi">13</span><span class="p">,</span>
  <span class="na">esc</span><span class="p">:</span>    <span class="mi">27</span><span class="p">,</span>
  <span class="na">space</span><span class="p">:</span>  <span class="mi">32</span><span class="p">,</span>
  <span class="na">left</span><span class="p">:</span>   <span class="mi">37</span><span class="p">,</span>
  <span class="na">up</span><span class="p">:</span>     <span class="mi">38</span><span class="p">,</span>
  <span class="na">right</span><span class="p">:</span>  <span class="mi">39</span><span class="p">,</span>
  <span class="na">down</span><span class="p">:</span>   <span class="mi">40</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">currentIndex</span><span class="p">,</span> <span class="nx">subIndex</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">gotoIndex</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">==</span> <span class="nx">appsMenuItems</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">idx</span> <span class="o">=</span> <span class="nx">appsMenuItems</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">appsMenuItems</span><span class="p">[</span><span class="nx">idx</span><span class="p">].</span><span class="nx">focus</span><span class="p">();</span>
  <span class="nx">currentIndex</span> <span class="o">=</span> <span class="nx">idx</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">gotoSubIndex</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">menu</span><span class="p">,</span> <span class="nx">idx</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">menu</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'li'</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">==</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">idx</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">items</span><span class="p">[</span><span class="nx">idx</span><span class="p">].</span><span class="nx">focus</span><span class="p">();</span>
  <span class="nx">subIndex</span> <span class="o">=</span> <span class="nx">idx</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">appsMenuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'tabindex'</span><span class="p">,</span> <span class="s1">'0'</span><span class="p">);</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"focus"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">currentIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'tabindex'</span><span class="p">,</span> <span class="s1">'-1'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"focus"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">subIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">appsMenuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'aria-expanded'</span><span class="p">,</span> <span class="s2">"false"</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">});</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">'aria-expanded'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'false'</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">'aria-expanded'</span><span class="p">)</span> <span class="o">==</span>  <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'aria-expanded'</span><span class="p">,</span> <span class="s2">"true"</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'aria-expanded'</span><span class="p">,</span> <span class="s2">"false"</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"keydown"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">right</span><span class="p">:</span>
          <span class="nx">gotoIndex</span><span class="p">(</span><span class="nx">currentIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">left</span><span class="p">:</span>
          <span class="nx">gotoIndex</span><span class="p">(</span><span class="nx">currentIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">tab</span><span class="p">:</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">shiftKey</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">gotoIndex</span><span class="p">(</span><span class="nx">currentIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">gotoIndex</span><span class="p">(</span><span class="nx">currentIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">enter</span><span class="p">:</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">down</span><span class="p">:</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
          <span class="nx">subindex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="nx">gotoSubIndex</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'ul'</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">up</span><span class="p">:</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
          <span class="kd">var</span> <span class="nx">submenu</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'ul'</span><span class="p">);</span>
          <span class="nx">subindex</span> <span class="o">=</span> <span class="nx">submenu</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'li'</span><span class="p">).</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
          <span class="nx">gotoSubIndex</span><span class="p">(</span><span class="nx">submenu</span><span class="p">,</span> <span class="nx">subindex</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">esc</span><span class="p">:</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'a[href="#related"]'</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">subMenuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
  <span class="nx">el</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'tabindex'</span><span class="p">,</span> <span class="s1">'-1'</span><span class="p">);</span>
  <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"keydown"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">tab</span><span class="p">:</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">shiftKey</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">gotoIndex</span><span class="p">(</span><span class="nx">currentIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">gotoIndex</span><span class="p">(</span><span class="nx">currentIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">right</span><span class="p">:</span>
          <span class="nx">gotoIndex</span><span class="p">(</span><span class="nx">currentIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">left</span><span class="p">:</span>
          <span class="nx">gotoIndex</span><span class="p">(</span><span class="nx">currentIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">esc</span><span class="p">:</span>
          <span class="nx">gotoIndex</span><span class="p">(</span><span class="nx">currentIndex</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">down</span><span class="p">:</span>
          <span class="nx">gotoSubIndex</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="nx">subIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">up</span><span class="p">:</span>
          <span class="nx">gotoSubIndex</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="nx">subIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">enter</span><span class="p">:</span>
        <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nl">space</span><span class="p">:</span>
          <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">innerText</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">);</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre>

</figure>

  </div>
</div>
<div class="navigation" id="nav">
  <nav role="navigation">
    <a class="" href="../../flyout/#web-application-menus"><span class="count"></span><span class="txt">Back to the example</span></a>
  </nav>
</div>
  </main>
	<footer role="contentinfo">
    <div>
		<h2>Document info</h2>
		<ul>
			<li><strong>Last Modification:</strong>
      
      
        [EDITOR’S DRAFT]
      
      01 October 2014
			</li>
      <li>
<strong>Editors: </strong>
<ul class="inline">
    <li><a href="http://w3.org/People/yatil/">Eric Eggert</a></li><li><a href="http://w3.org/People/shadi/">Shadi Abou-Zahra</a></li>
  </ul>

<strong>Contributors:</strong>
The Education and Outreach Working Group (<a href="http://www.w3.org/WAI/EO/">EOWG</a>).
</li>

<li>
</li>

      <li>[<a class="" href="../../../attributions/"><span class="count"></span><span class="txt">Attributions</span></a>]  [<a class="" href="../../../changelog/"><span class="count"></span><span class="txt">Changelog</span></a>]</li>
    </ul>
    <p>
    	[<a href="http://www.w3.org/WAI/sitemap.html">WAI Site Map</a>]
    	[<a href="http://www.w3.org/WAI/sitehelp.html">Help with WAI Website</a>]
    	[<a href="http://www.w3.org/WAI/search.php">Search</a>]
    	[<a href="http://www.w3.org/WAI/contacts">Contacting WAI</a>]
		</p>
    <p><strong>Feedback welcome to <a href="mailto:wai-eo-editors@w3.org">wai-eo-editors@w3.org</a></strong> (a publicly archived list) or <a href="mailto:wai@w3.org">wai@w3.org</a> (a WAI staff-only list).</p>
    </p>
    <div class="copyright">
      <p>
	<a rel="Copyright" href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©2014
      	<a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
				(<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
					<a href="http://www.ercim.org/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
					<a href="http://www.keio.ac.jp/">Keio</a>,
         	<a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
         <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>,               <a rel="Copyright" href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>               and <a rel="Copyright" href="http://www.w3.org/Consortium/Legal/copyright-software">software licensing</a> rules apply. Your interactions with this site are in accordance with our <a href="http://www.w3.org/Consortium/Legal/privacy-statement#Public">public</a>
               and <a href="http://www.w3.org/Consortium/Legal/privacy-statement#Members">Member</a>privacy statements.</p>                   </div><!-- ends copyright -->
    </div>
	</footer>
	<script src="../../../javascripts/main-cf7029ba.js" type="text/javascript"></script>
	</body>
</html>
